---
title: "EEEB UN3005/GR5005  \nHomework - Week 04"
author: "USE THE NUMERIC PORTION OF YOUR UNI HERE"
output: pdf_document
fontsize: 12pt
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

# Knit option to cut long lines of code
require('formatR')
knitr::opts_chunk$set(tidy.opts = list(width.cutoff = 80), tidy = TRUE)


```



**Homework Instructions:** Complete this assignment by writing code in the code chunks provided. If required, provide written explanations below the relevant code chunks. When complete, knit this document within RStudio to generate a PDF file. Please review the resulting PDF to ensure that all content relevant for grading (i.e., code, code output, and written explanations) appears in the document. Upload this final homework document to CourseWorks by the due date.



# Exploratory analysis on a species survey dataset (30 points)

When working with real-life data, you will likely spend a lot of time processing, cleaning, combining, and re-arranging data. For many analyses projects, this process often takes way more effort and time than the actual analyses themselves. Keep in mind the principles of tidy data and follow them whenever you can! 

Here, you will work on a dataset of species surveys, which is clean but broken into 3 different tables according to tidy principles: survey data, species information, and plot information. Proceed in steps. 



## Part 1: 

Read in all three csv files. Then look at your dataframes and identify which columns link across the tables. 
Briefly describe how these tables are related (1 point total). 

```{r}


```




## Part 2: 

Your first goal is to combine the information from all three tables into one combined dataframe for later analyses (3 points). You can use the `merge()` function from base R or the `left_join()` as one of the join functions from `dplyr`. See the help file for either one or use your friend Google to learn about how to use these functions. Enter your code below that produces one final dataframe with info from all three tables. (3 points total)

```{r}



```





## Part 3: 

Some columns in your data have missing values. Which ones are they? (1 point). What do you think those missing rows represent? (1 point)? (2 points total)

```{r}


```





## Part 4: 

Further examine missing values in one variable of your choice. Which survey year has the most missing values for that variable? Note: You can go about this in different ways, using either `dplyr` or base R functinos. (2 points total)

```{r}


  
```





## Part 5: 

For the next questions, you will use a combination of `dplyr` and `ggplot2` to answer basic questions about your data. 

First, you want to get an idea of whether samples are evenly distributed by species and plot type. For this, make a dataframe that 1) counts the number of species found at each plot type (2 points), and 2) the number of individuals recorded by species over all years (2 points). Note that each species is presented many times (potentially) in the data, which has implications for your data aggregation pipeline. (4 points total)

```{r}



  

```





## Part 6: 

Now, plot the distribution of your numerical measurement variable weight (1 points). Are your weights normally distributed (1 point)? Explain why the distribution looks like the way it does (1 points). (3 points total)

```{r}


```





## Part 7: 

Filter out the most common species in the data and repeat the assessment of the distribution of the weight variable. 
What does the distribution look like now and what do you think it means? (2 points total)

```{r}



```






## Part 8: 

Using the same species, lets dig into the distribution from above a bit more. Your next task is to create a figure that effectively compares the average weight of the individuals of that species in each plot type and year (4 points). Can you identify any patterns that may suggest variation either within years across plot types or across years (1 point)? (5 points total)

```{r}



```






## Part 9: 

Are there outliers in the weights data for this species in the long-term krat exposure plots? Use a method of your choice and identify the lower threshold below which you would consider a weight for this species to be an outlier (2 points). 

```{r}



```







## Part 10: 

Make a contingency table that counts the number of rodents (all species) per plot type and year for the last 5 years. This table should have, as rows, the plot types, and as columns the last 5 years; the values in each cell should contain the counts. You can do this using `dplyr` syntax and the function `tally()` for counting rows in each group. As years are currently all in one column, your summary table will be in long-format. To get this into the shape of a contingency table, you need to reshape them to appear in different columns (2002, 2001, etc.). This is similar to pivoting in Excel and can be achieved easily with the `pivot_wider()` function from the `tidyr` package. Make sure you call your table object so that it gets printed in the PDF. (3 points)


```{r}




```





Finally, create a segmented bar chart, showing the relative (!) distribution of rodents across plot types and years. To be clear, each bar should show the relative percentage of all rodents captured that are captures in each plot type, adding up to 100%. Each plot type should have its own fill color. Note that the `geom_bar()` function includes a `position` argument that lets you easily scale the counts to 100% by selecting `position_fill()`, avoiding the need to calculate proportions manually before plotting. (3 points) (3 points)

```{r}


  
  
```

